!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=OSjs},function(e){e.exports={a:"Textpad"}},function(e,t,n){e.exports=n(3)},function(e,t,n){"use strict";function r(e,t){for(var n=[],r=[],o=arguments.length;o-- >2;)n.push(arguments[o]);for(;n.length;){var i=n.pop();if(i&&i.pop)for(o=i.length;o--;)n.push(i[o]);else null!=i&&!0!==i&&!1!==i&&r.push(i)}return"function"==typeof e?e(t||{},r):{nodeName:e,attributes:t||{},children:r,key:t&&t.key}}function o(e,t,n,r){var o,i=[].map,u=r&&r.children[0]||null,c=u&&function e(t){return{nodeName:t.nodeName.toLowerCase(),attributes:{},children:i.call(t.childNodes,function(t){return 3===t.nodeType?t.nodeValue:e(t)})}}(u),a=[],s=!0,l=h(e),f=function e(t,n,r){for(var o in r)"function"==typeof r[o]?function(e,o){r[e]=function(e){var i=o(e);return"function"==typeof i&&(i=i(y(t,l),r)),i&&i!==(n=y(t,l))&&!i.then&&p(l=m(t,h(n,i),l)),i}}(o,r[o]):e(t.concat(o),n[o]=h(n[o]),r[o]=h(r[o]));return r}([],l,h(t));return p(),f;function d(e){return"function"==typeof e?d(e(l,f)):null!=e?e:""}function v(){o=!o;var e=d(n);for(r&&!o&&(u=function e(t,n,r,o,i){if(o===r);else if(null==r||r.nodeName!==o.nodeName){var u=function e(t,n){var r="string"==typeof t||"number"==typeof t?document.createTextNode(t):(n=n||"svg"===t.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):document.createElement(t.nodeName);var o=t.attributes;if(o){o.oncreate&&a.push(function(){o.oncreate(r)});for(var i=0;i<t.children.length;i++)r.appendChild(e(t.children[i]=d(t.children[i]),n));for(var u in o)x(r,u,o[u],null,n)}return r}(o,i);t.insertBefore(u,n),null!=r&&w(t,n,r),n=u}else if(null==r.nodeName)n.nodeValue=o;else{!function(e,t,n,r){for(var o in h(t,n))n[o]!==("value"===o||"checked"===o?e[o]:t[o])&&x(e,o,n[o],t[o],r);var i=s?n.oncreate:n.onupdate;i&&a.push(function(){i(e,t)})}(n,r.attributes,o.attributes,i=i||"svg"===o.nodeName);for(var c={},l={},f=[],v=r.children,p=o.children,m=0;m<v.length;m++){f[m]=n.childNodes[m];var y=g(v[m]);null!=y&&(c[y]=[f[m],v[m]])}for(var m=0,b=0;b<p.length;){var y=g(v[m]),j=g(p[b]=d(p[b]));if(l[y])m++;else if(null==j||j!==g(v[m+1]))if(null==j||s)null==y&&(e(n,f[m],v[m],p[b],i),b++),m++;else{var k=c[j]||[];y===j?(e(n,k[0],k[1],p[b],i),m++):k[0]?e(n,n.insertBefore(k[0],f[m]),k[1],p[b],i):e(n,f[m],null,p[b],i),l[j]=p[b],b++}else null==y&&w(n,f[m],v[m]),m++}for(;m<v.length;)null==g(v[m])&&w(n,f[m],v[m]),m++;for(var m in c)l[m]||w(n,c[m][0],c[m][1])}return n}(r,u,c,c=e)),s=!1;a.length;)a.pop()()}function p(){o||(o=!0,setTimeout(v))}function h(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function m(e,t,n){var r={};return e.length?(r[e[0]]=e.length>1?m(e.slice(1),t,n[e[0]]):t,h(n,r)):t}function y(e,t){for(var n=0;n<e.length;)t=t[e[n++]];return t}function g(e){return e?e.key:null}function b(e){return e.currentTarget.events[e.type](e)}function x(e,t,n,r,o){if("key"===t);else if("style"===t)if("string"==typeof n)e.style.cssText=n;else for(var i in"string"==typeof r&&(r=e.style.cssText=""),h(r,n)){var u=null==n||null==n[i]?"":n[i];"-"===i[0]?e.style.setProperty(i,u):e.style[i]=u}else"o"===t[0]&&"n"===t[1]?(t=t.slice(2),e.events?r||(r=e.events[t]):e.events={},e.events[t]=n,n?r||e.addEventListener(t,b):e.removeEventListener(t,b)):t in e&&"list"!==t&&"type"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!o?e[t]=null==n?"":n:null!=n&&!1!==n&&e.setAttribute(t,n),null!=n&&!1!==n||e.removeAttribute(t)}function w(e,t,n){function r(){e.removeChild(function e(t,n){var r=n.attributes;if(r){for(var o=0;o<n.children.length;o++)e(t.childNodes[o],n.children[o]);r.ondestroy&&r.ondestroy(t)}return t}(t,n))}var o=n.attributes&&n.attributes.onremove;o?o(t,r):r()}}n.r(t);var i=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}};var u=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)};var c=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var a=function(e){return i(e)||u(e)||c()};function s(e,t){for(var n=[],r=[],o=arguments.length;2<o--;)n.push(arguments[o]);for(;n.length;){var i=n.pop();if(i&&i.pop)for(o=i.length;o--;)n.push(i[o]);else null!=i&&!0!==i&&!1!==i&&r.push(i)}return"function"==typeof e?e(t||{},r):{nodeName:e,attributes:t||{},children:r,key:t&&t.key}}function l(e,t,n,r){function o(e){return"function"==typeof e?o(e(j,k)):null==e?"":e}function i(){m=!m;var e=o(n);for(r&&!m&&(g=function e(t,n,r,i,u){if(i===r);else if(null==r||r.nodeName!==i.nodeName){var c=v(i,u);t.insertBefore(c,n),null!=r&&h(t,n,r),n=c}else if(null==r.nodeName)n.nodeValue=i;else{p(n,r.attributes,i.attributes,u=u||"svg"===i.nodeName);for(var a={},s={},f=[],d=r.children,m=i.children,y=0;y<d.length;y++){f[y]=n.childNodes[y];var g=l(d[y]);null!=g&&(a[g]=[f[y],d[y]])}for(var y=0,b=0;b<m.length;){var g=l(d[y]),x=l(m[b]=o(m[b]));if(s[g])y++;else if(null==x||x!==l(d[y+1]))if(null==x||w)null==g&&(e(n,f[y],d[y],m[b],u),b++),y++;else{var j=a[x]||[];g===x?(e(n,j[0],j[1],m[b],u),y++):j[0]?e(n,n.insertBefore(j[0],f[y]),j[1],m[b],u):e(n,f[y],null,m[b],u),s[x]=m[b],b++}else null==g&&h(n,f[y],d[y]),y++}for(;y<d.length;)null==l(d[y])&&h(n,f[y],d[y]),y++;for(var y in a)s[y]||h(n,a[y][0],a[y][1])}return n}(r,g,b,b=e)),w=!1;x.length;)x.pop()()}function u(){m||(m=!0,setTimeout(i))}function c(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function a(e,t,n){var r={};return e.length?(r[e[0]]=1<e.length?a(e.slice(1),t,n[e[0]]):t,c(n,r)):t}function s(e,t){for(var n=0;n<e.length;)t=t[e[n++]];return t}function l(e){return e?e.key:null}function f(e){return e.currentTarget.events[e.type](e)}function d(e,t,n,r,o){if("key"===t);else if("style"!==t)"o"===t[0]&&"n"===t[1]?(t=t.slice(2),e.events?!r&&(r=e.events[t]):e.events={},e.events[t]=n,n?!r&&e.addEventListener(t,f):e.removeEventListener(t,f)):t in e&&"list"!==t&&"type"!==t&&"draggable"!==t&&"spellcheck"!==t&&"translate"!==t&&!o?e[t]=null==n?"":n:null!=n&&!1!==n&&e.setAttribute(t,n),(null==n||!1===n)&&e.removeAttribute(t);else if("string"==typeof n)e.style.cssText=n;else for(var i in"string"==typeof r&&(r=e.style.cssText=""),c(r,n)){var u=null==n||null==n[i]?"":n[i];"-"===i[0]?e.style.setProperty(i,u):e.style[i]=u}}function v(e,t){var n="string"==typeof e||"number"==typeof e?document.createTextNode(e):(t=t||"svg"===e.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",e.nodeName):document.createElement(e.nodeName),r=e.attributes;if(r){r.oncreate&&x.push(function(){r.oncreate(n)});for(var i=0;i<e.children.length;i++)n.appendChild(v(e.children[i]=o(e.children[i]),t));for(var u in r)d(n,u,r[u],null,t)}return n}function p(e,t,n,r){for(var o in c(t,n))n[o]!==("value"==o||"checked"==o?e[o]:t[o])&&d(e,o,n[o],t[o],r);var i=w?n.oncreate:n.onupdate;i&&x.push(function(){i(e,t)})}function h(e,t,n){function r(){e.removeChild(function e(t,n){var r=n.attributes;if(r){for(var o=0;o<n.children.length;o++)e(t.childNodes[o],n.children[o]);r.ondestroy&&r.ondestroy(t)}return t}(t,n))}var o=n.attributes&&n.attributes.onremove;o?o(t,r):r()}var m,y=[].map,g=r&&r.children[0]||null,b=g&&function e(t){return{nodeName:t.nodeName.toLowerCase(),attributes:{},children:y.call(t.childNodes,function(t){return 3===t.nodeType?t.nodeValue:e(t)})}}(g),x=[],w=!0,j=c(e),k=function e(t,n,r){for(var o in r)"function"==typeof r[o]?function(e,o){r[e]=function(e){var i=o(e);return"function"==typeof i&&(i=i(s(t,j),r)),i&&i!==(n=s(t,j))&&!i.then&&u(j=a(t,c(n,i),j)),i}}(o,r[o]):e(t.concat(o),n[o]=c(n[o]),r[o]=c(r[o]));return r}([],j,c(t));return u(),k}var f=function(e,t){return"number"==typeof e?"".concat(e,"px"):!1===e?t:e},d={grow:function(e){return{flexGrow:e}},shrink:function(e){return{flexShrink:e}},basis:function(e){return{flexBasis:f(e,"auto")}},align:function(e){return{alignItems:e}},justify:function(e){return{justifyContent:e}},padding:function(e){return{margin:f(e,"0")}},margin:function(e){return{margin:f(e,"0")}}},v=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=e.class instanceof Array?e.class:[e.class],r=["osjs-gui"].concat(a(n));e.orientation&&r.push("osjs-gui-"+e.orientation);var o="string"==typeof e.style?{}:Object.assign({},e.style||{}),i=Object.keys(e).reduce(function(t,n){var r=d[n]?d[n](e[n]):void 0;return Object.assign({},t,r)},o);return s("div",{oncreate:e.oncreate,ondestroy:e.ondestroy,class:r.filter(function(e){return!!e}).join(" "),style:i},t)},p=function(e,t){return s(v,Object.assign({orientation:"horizontal"},e,{class:["osjs-gui-box",e.class]}),t)};function h(e,t){return e(t={exports:{}},t.exports),t.exports}var m=h(function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(r){return e.exports=n="function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?function(e){return t(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},n(r)}e.exports=n}),y=function(e){var t=e&&"object"===m(e)?e.src:e;return s("i",{"data-icon":e&&"object"===m(e)?e.name:void 0,class:"osjs-icon",style:{backgroundImage:"string"==typeof e?"url(".concat(t,")"):void 0}})};var g=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},b=function(e,t){return Object.keys(e).filter(function(e){return-1===t.indexOf(e)}).reduce(function(t,n){return Object.assign(g({},n,e[n]),t)},{})},x=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:250,n=!1;return function(r,o){return e=clearTimeout(e),e=setTimeout(function(){return n=!1},t),n?(r.preventDefault(),o(r)):(n=!0,!1)}},w=function(e,t,n,r,o){var i=t.oninput||function(){},u=t.onchange||function(){},c=t.onkeydown||function(){},l=o||function(e){return[e.target.value]},f=Object.assign({oninput:function(e){return i.apply(void 0,[e].concat(a(l(e))))},onchange:function(e){return u.apply(void 0,[e].concat(a(l(e))))},onkeydown:function(e){13===e.keyCode&&t.onenter&&t.onenter.apply(t,[e].concat(a(l(e)))),c(e)}},n,b(t,["choices","label","box","oninput","onchange"]));return s(v,Object.assign({},t.box||{},{class:"osjs-gui-field osjs-gui-"+e}),r(f))},j=function(e){return s("div",{id:"osjs-context-menu",className:"osjs-gui osjs-gui-menu",oncreate:e.oncreate,onupdate:e.onupdate,style:{display:!1===e.visible?"none":"block",top:e.position?e.position.top+"px":0,left:e.position?e.position.left+"px":0}},function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=function(e){var t=[];return"checkbox"===e.type||"boolean"==typeof e.checked?t.push(s("span",{class:"osjs-gui-menu-checkbox "+(e.checked?"active":"")})):e.icon&&t.push(s(y,e.icon)),t.push(s("span",{},e.label)),t},i=function(t,n){if("function"==typeof n.element)return n.element();var i=[s("span",{class:"separator"===n.type?"osjs-gui-menu-separator":"osjs-gui-menu-label "+(n.disabled?"osjs__disabled":"")},o(n))];return n.items&&i.push(e(t,n.items,r+1)),i};return s("ul",{class:""},n.map(function(e){return s("li",{class:"osjs-gui-menu-entry"},[s("div",{class:"osjs-gui-menu-container","data-has-image":!!e.icon||void 0,"data-has-children":!!e.items||void 0,onmouseover:e.items?t.onshow:void 0,ontouchend:e.items?t.onshow:void 0,onclick:function(n){e.items||(e.onclick&&e.onclick(e,n),t.onclick&&t.onclick(e,n,e))}},i(t,e))])}))}(e,e.menu))},k=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=e.onclick,r=e.data;return s("div",{onclick:function(e){if("function"==typeof n){var t=e.target.parentNode,o=Array.prototype.indexOf.call(t.children,e.target);n(e,r||{},o)}}},s("span",{},t))},L=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return s(v,Object.assign({},e,{class:["osjs-gui-menubar",e.class]}),[].concat(a((e.items||[]).map(function(t){return s(k,{data:t.data,onclick:t.onclick||e.onclick},t.label)})),a(t)))};function N(e,t,n,r){return t._$r=function(){return{}},function(o,i){return s(r||"x-",{key:o.key,id:o.id,class:o.class,oncreate:function(r){var u=l(e,t,function(e,t){var o=n(e,t);return"function"==typeof o&&(o=o(r._$p,r._$c)),o},r);r._$p=o,r._$c=i,r._$r=u._$r,r._$u=u.uninit,u.init&&u.init(o),o.oncreate&&o.oncreate(r)},onupdate:function(e){e._$p=o,e._$c=i,e._$r(),o.onupdate&&o.onupdate(e)},ondestroy:function(e){e._$u&&e._$u()},onremove:function(e,t){return o.onremove?void o.onremove(e,t):t()}})}}var E=function(e,t,n,r){var o=Array(Math.ceil(n.length/2)).fill(null).map(function(){return s("div",{class:"osjs-gui-panes-spacer",onmousedown:function(e){return function(e,t,n){var r=e.target,o=e.clientX,i=e.clientY,u=r.previousSibling,c=u.offsetWidth,a=u.offsetHeight,s=Array.from(r.parentNode.children).indexOf(u),l=.8*u.parentNode.offsetWidth,f=.8*u.parentNode.offsetHeight;if(!(0>s)){var d=function(e){var r=Math.min;e.preventDefault();var u="vertical"===n?c:a;if("vertical"===n){var d=e.clientX-o;u=r(l,u+d)}else{var v=e.clientY-i;u=r(f,u+v)}t.setSize({index:s,size:u})};e.preventDefault(),document.addEventListener("mousemove",d),document.addEventListener("mouseup",function e(t){t.preventDefault(),document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",e)})}}(e,t,r)}})});return n.map(function(t,n){var r=e.sizes[n]?e.sizes[n]+"px":void 0;return s("div",{class:"osjs-gui-panes-pane",style:{flex:r?"0 0 ".concat(r):r}},t)}).map(function(e,t){return[e,o[t]]}).reduce(function(e,t){return e.concat(t)}).filter(function(e){return void 0!==e})},_=(N({sizes:[]},{init:function(e){return{sizes:e.sizes||[150]}},setSize:function(e){var t=e.index,n=e.size;return function(e){var r=[].concat(e.sizes);return r[t]=n,{sizes:r}}}},function(e,t){return function(n,r){var o=n.orientation||"vertical";return s(v,{orientation:o,class:"osjs-gui-panes-inner"},E(e,t,r,o))}},"div"),x(),x(),function(e,t,n){var r=e.labels,o=e.onchange,i=e.oncontextmenu;return(r||[]).map(function(e,r){return s("div",{class:t.selectedIndex===r?"osjs__active":"",oncontextmenu:function(t){(i||function(){})(t,r,e)},onclick:function(t){n.setSelectedIndex(r),(o||function(){})(t,r,e)}},s("span",{},e))})}),O=function(e,t){return t.map(function(t,n){return s("div",{class:e.selectedIndex===n?"osjs__active":""},t)})},S=(N({selectedIndex:0},{init:function(e){return{selectedIndex:e.selectedIndex||0}},setSelectedIndex:function(e){return function(){return{selectedIndex:e}}}},function(e,t){return function(n,r){return s("div",{class:"osjs-gui-tabs-wrapper"},[s("div",{class:"osjs-gui-tabs-header"},_(n,e,t)),s("div",{class:"osjs-gui-tabs-panes"},O(e,r))])}},"div"),function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return w("textarea-field",e,{rows:4},function(e){return s("textarea",e,t)})}),T=(N({active:!0},{init:function(e){return{ative:!1!==e.active}},ontoggle:function(e){var t=e.ev,n=e.active;return(e.ontoggle||function(){})(t,n),{active:n}}},function(e,t){return function(n,r){return s(v,Object.assign({},n.box||{},{class:["osjs-gui-expander-wrapper"]}),[s("div",{class:"osjs-gui-expander-header",onclick:function(r){return t.ontoggle({ev:r,active:!e.active,ontoggle:n.ontoggle})}},[s("div",{class:"osjs-gui-expander-header-icon","data-active":e.active+""}),s("div",{class:"osjs-gui-expander-header-label"},n.label)]),s("div",{class:"osjs-gui-expander-content",style:{display:!1===e.active?"none":void 0}},r)])}},"div"),h(function(e){!function(t){function n(e,t,n,r){var i=t&&t.prototype instanceof o?t:o,u=Object.create(i.prototype),c=new v(r||[]);return u._invoke=s(e,n,c),u}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function o(){}function i(){}function u(){}function c(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function a(e){function t(n,o,i,u){var c=r(e[n],e,o);if("throw"!==c.type){var a=c.arg,s=a.value;return s&&"object"==typeof s&&y.call(s,"__await")?Promise.resolve(s.__await).then(function(e){t("next",e,i,u)},function(e){t("throw",e,i,u)}):Promise.resolve(s).then(function(e){a.value=e,i(a)},function(e){return t("throw",e,i,u)})}u(c.arg)}var n;this._invoke=function(e,r){function o(){return new Promise(function(n,o){t(e,r,n,o)})}return n=n?n.then(o,o):o()}}function s(e,t,n){var o="suspendedStart";return function(i,u){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw u;return{value:void 0,done:!0}}for(n.method=i,n.arg=u;;){var c=n.delegate;if(c){var a=l(c,n);if(a){if(a===k)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var s=r(e,t,n);if("normal"===s.type){if(o=n.done?"completed":"suspendedYield",s.arg===k)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o="completed",n.method="throw",n.arg=s.arg)}}}function l(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,l(e,t),"throw"===t.method))return k;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return k}var o=r(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,k;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,k):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,k)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function v(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function p(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:h}}function h(){return{value:void 0,done:!0}}var m=Object.prototype,y=m.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},b=g.iterator||"@@iterator",x=g.asyncIterator||"@@asyncIterator",w=g.toStringTag||"@@toStringTag",j=t.regeneratorRuntime;if(j)e.exports=j;else{(j=t.regeneratorRuntime=e.exports).wrap=n;var k={},L={};L[b]=function(){return this};var N=Object.getPrototypeOf,E=N&&N(N(p([])));E&&E!==m&&y.call(E,b)&&(L=E);var _=u.prototype=o.prototype=Object.create(L);i.prototype=_.constructor=u,u.constructor=i,u[w]=i.displayName="GeneratorFunction",j.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},j.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,!(w in e)&&(e[w]="GeneratorFunction")),e.prototype=Object.create(_),e},j.awrap=function(e){return{__await:e}},c(a.prototype),a.prototype[x]=function(){return this},j.AsyncIterator=a,j.async=function(e,t,r,o){var i=new a(n(e,t,r,o));return j.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},c(_),_[w]="Generator",_[b]=function(){return this},_.toString=function(){return"[object Generator]"},j.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},j.values=p,v.prototype={constructor:v,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=void 0),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var u=y.call(o,"catchLoc"),c=y.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var n,r=this.tryEntries.length-1;0<=r;--r)if((n=this.tryEntries[r]).tryLoc<=this.prev&&y.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,k):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),k},finish:function(e){for(var t,n=this.tryEntries.length-1;0<=n;--n)if((t=this.tryEntries[n]).finallyLoc===e)return this.complete(t.completion,t.afterLoc),d(t),k},catch:function(e){for(var t,n=this.tryEntries.length-1;0<=n;--n)if((t=this.tryEntries[n]).tryLoc===e){var r=t.completion;if("throw"===r.type){var o=r.arg;d(t)}return o}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),k}}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())})),P=function(){return this||"object"==typeof self&&self}()||Function("return this")(),A=P.regeneratorRuntime&&0<=Object.getOwnPropertyNames(P).indexOf("regeneratorRuntime"),I=A&&P.regeneratorRuntime;P.regeneratorRuntime=void 0;var $=T;if(A)P.regeneratorRuntime=I;else try{delete P.regeneratorRuntime}catch(e){P.regeneratorRuntime=void 0}var B=$;function R(e,t,n,r,o,i,u){try{var c=e[i](u),a=c.value}catch(e){return void n(e)}c.done?t(a):Promise.resolve(a).then(r,o)}var z=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){function i(e){R(c,r,o,i,u,"next",e)}function u(e){R(c,r,o,i,u,"throw",e)}var c=e.apply(t,n);i(void 0)})}};var C=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function F(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}var W=function(e,t,n){return t&&F(e.prototype,t),n&&F(e,n),e},G=function(e){return e(),setTimeout(e,100)},D=function(){function e(t){C(this,e),this.core=t,this.callback=function(){},this.actions=null}return W(e,[{key:"destroy",value:function(){this.callback=null,this.actions=null}},{key:"init",value:function(){var e,t=this;this.actions=l({visible:!1,menu:[],position:{top:0,left:0}},{clamp:function(n){return function(r){if(n=n||document.querySelector("#osjs-context-menu"),clearTimeout(e),n){var o=function(e,t,n){var r={},o=n.top+t.offsetHeight,i=n.left+t.offsetWidth,u=e.offsetHeight-n.top,c=e.offsetWidth-n.left,a=i>e.offsetWidth,s=o>e.offsetHeight;return s&&(r.top=e.offsetHeight-t.offsetHeight-u),a&&(r.left=e.offsetWidth-t.offsetWidth-c),s||a?r:null}(t.core.$root,n,r.position);if(o)return{position:o}}return{}}},onshow:function(n){return function(){e=G(function(){return function(e,t){var n=t.target.querySelector("ul");n&&(n.classList.contains("osjs-gui-menu-container")&&(n=n.parentNode.parentNode),n&&n.offsetParent)&&(n.classList.remove("clamp-right"),n.getBoundingClientRect().right>e.offsetWidth&&n.classList.add("clamp-right"))}(t.core.$root,n)})}},show:function(e){return function(n,r){var o=e.menu,i=e.position;if(i instanceof Event)i={left:i.clientX,top:i.clientY};else if(i instanceof Element){var u=i.getBoundingClientRect();i={left:u.left,top:u.top+u.height}}return t.callback=function(n,r,o){e.callback&&e.callback(n,r),!1!==o.closeable&&t.actions.hide()},G(function(){return r.clamp()}),{visible:!0,menu:o||[],position:i||{top:0,left:0}}}},hide:function(){return function(){return t.callback=null,{visible:!1}}}},function(e){return function(t,n){return s(j,{position:t.position,visible:t.visible,menu:t.menu,onclick:e,onshow:n.onshow})}}(function(){!t.core.destroyed&&t.callback&&t.callback.apply(t,arguments)}),this.core.$root)}},{key:"show",value:function(){var e;return this.actions?(e=this.actions).show.apply(e,arguments):null}},{key:"hide",value:function(){var e;return this.actions?(e=this.actions).hide.apply(e,arguments):null}}]),e}(),H=function(e){var t=e.target,n="TEXTAREA"===t.tagName;return n||"INPUT"!==t.tagName||(n=-1!==["text","password","number","email"].indexOf(t.type)),n},M=(function(){function e(t){C(this,e),this.core=t,this.contextmenu=new D(t)}W(e,[{key:"destroy",value:function(){var e=document.getElementById("osjs-context-menu");e&&e.remove(),this.contextmenu.destroy()}},{key:"init",value:function(){var e=z(B.mark(function e(){var t,n=this;return B.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={show:function(){var e;return(e=n.contextmenu).show.apply(e,arguments)},hide:function(){var e;return(e=n.contextmenu).hide.apply(e,arguments)}},this.core.instance("osjs/contextmenu",function(){return arguments.length?t.show.apply(t,arguments):t}),this.core.$root.addEventListener("contextmenu",function(e){H(e)||(e.stopPropagation(),e.preventDefault())});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=this;this.core.$root.addEventListener("click",function(t){!document.getElementById("osjs-context-menu").contains(t.target)&&e.contextmenu&&e.contextmenu.hide()},!0),this.contextmenu.init()}}])}(),n(0)),V=n.n(M),Y=n(1),X=function(e,t,n){return[{label:n("LBL_NEW"),onclick:function(){return t.menuNew()}},{label:n("LBL_OPEN"),onclick:function(){return t.menuOpen()}},{label:n("LBL_SAVE"),disabled:!e,onclick:function(){return t.menuSave()}},{label:n("LBL_SAVEAS"),onclick:function(){return t.menuSaveAs()}},{label:n("LBL_QUIT"),onclick:function(){return t.menuQuit()}}]},q=function(e,t){t.createWindow({id:"TextpadWindow",icon:t.resource(t.metadata.icon),dimension:{width:400,height:400}}).on("destroy",function(){return t.destroy()}).on("render",function(e){return e.focus()}).render(function(n,i){return function(e,t,n,i){var u=e.make("osjs/locale").translate,c=e.make("osjs/vfs"),a=e.make("osjs/basic-application",t,n,{defaultFilename:"New File.txt"}),s=o({text:""},{setText:function(e){return function(t){return{text:e}}},save:function(){return function(e){if(t.args.file){var n=i.querySelector("textarea").value;c.writefile(t.args.file,n)}}},load:function(e){return function(t,n){c.readfile(e).then(function(e){return n.setText(e)}).catch(function(e){return console.error(e)})}},menu:function(n){return function(r,o){e.make("osjs/contextmenu").show({position:n.target,menu:X(t.args.file,o,u)})}},menuNew:function(){return function(e){return a.createNew()}},menuOpen:function(){return function(e){return a.createOpenDialog()}},menuSave:function(){return function(e,t){return t.save()}},menuSaveAs:function(){return function(e){return a.createSaveDialog()}},menuQuit:function(){return function(e){return t.destroy()}}},function(e,t){return r(p,{},[r(L,{},[r(k,{onclick:function(e){return t.menu(e)}},u("LBL_FILE"))]),r(S,{box:{grow:1},value:e.text,oninput:function(e,n){return t.setText(n)}})])},i);n.on("drop",function(e,n){n.isFile&&n.mime&&t.metadata.mimes.find(function(e){return new RegExp(e).test(n.mime)})&&a.open(n)}),t.on("destroy",function(){return a.destroy()}),a.on("new-file",function(){return s.setText("")}),a.on("save-file",s.save),a.on("open-file",s.load),a.init()}(e,t,i,n)})};V.a.register(Y.a,function(e,t,n,r){var o=e.make("osjs/application",{args:t,options:n,metadata:r});return q(e,o),o})}]);
//# sourceMappingURL=main.js.map