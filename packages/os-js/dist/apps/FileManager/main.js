!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=4)}([function(t,n,e){t.exports=e(5)},function(t,n){function e(t,n,e,r,o,i,c){try{var u=t[i](c),a=u.value}catch(t){return void e(t)}u.done?n(a):Promise.resolve(a).then(r,o)}t.exports=function(t){return function(){var n=this,r=arguments;return new Promise(function(o,i){var c=t.apply(n,r);function u(t){e(c,o,i,u,a,"next",t)}function a(t){e(c,o,i,u,a,"throw",t)}u(void 0)})}}},function(t,n){t.exports=OSjs},function(t){t.exports={a:"FileManager"}},function(t,n,e){t.exports=e(8)},function(t,n,e){var r=function(){return this||"object"==typeof self&&self}()||Function("return this")(),o=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=e(6),o)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},function(t,n){!function(n){"use strict";var e,r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag",s="object"==typeof t,f=n.regeneratorRuntime;if(f)s&&(t.exports=f);else{(f=n.regeneratorRuntime=s?t.exports:{}).wrap=b;var l="suspendedStart",p="suspendedYield",h="executing",v="completed",d={},y={};y[c]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(F([])));g&&g!==r&&o.call(g,c)&&(y=g);var x=k.prototype=L.prototype=Object.create(y);j.prototype=x.constructor=k,k.constructor=j,k[a]=j.displayName="GeneratorFunction",f.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===j||"GeneratorFunction"===(n.displayName||n.name))},f.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(x),t},f.awrap=function(t){return{__await:t}},_(O.prototype),O.prototype[u]=function(){return this},f.AsyncIterator=O,f.async=function(t,n,e,r){var o=new O(b(t,n,e,r));return f.isGeneratorFunction(n)?o:o.next().then(function(t){return t.done?t.value:o.next()})},_(x),x[a]="Generator",x[c]=function(){return this},x.toString=function(){return"[object Generator]"},f.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},f.values=F,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return u.type="throw",u.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var c=this.tryEntries[i],u=c.completion;if("root"===c.tryLoc)return r("end");if(c.tryLoc<=this.prev){var a=o.call(c,"catchLoc"),s=o.call(c,"finallyLoc");if(a&&s){if(this.prev<c.catchLoc)return r(c.catchLoc,!0);if(this.prev<c.finallyLoc)return r(c.finallyLoc)}else if(a){if(this.prev<c.catchLoc)return r(c.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return r(c.finallyLoc)}}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=n&&n<=i.finallyLoc&&(i=null);var c=i?i.completion:{};return c.type=t,c.arg=n,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(c)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),d},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),N(e),d}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var o=r.arg;N(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:F(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),d}}}function b(t,n,e,r){var o=n&&n.prototype instanceof L?n:L,i=Object.create(o.prototype),c=new T(r||[]);return i._invoke=function(t,n,e){var r=l;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===v){if("throw"===o)throw i;return S()}for(e.method=o,e.arg=i;;){var c=e.delegate;if(c){var u=I(c,e);if(u){if(u===d)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(r===l)throw r=v,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r=h;var a=w(t,n,e);if("normal"===a.type){if(r=e.done?v:p,a.arg===d)continue;return{value:a.arg,done:e.done}}"throw"===a.type&&(r=v,e.method="throw",e.arg=a.arg)}}}(t,e,c),i}function w(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}function L(){}function j(){}function k(){}function _(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function O(t){var n;this._invoke=function(e,r){function i(){return new Promise(function(n,i){!function n(e,r,i,c){var u=w(t[e],t,r);if("throw"!==u.type){var a=u.arg,s=a.value;return s&&"object"==typeof s&&o.call(s,"__await")?Promise.resolve(s.__await).then(function(t){n("next",t,i,c)},function(t){n("throw",t,i,c)}):Promise.resolve(s).then(function(t){a.value=t,i(a)},function(t){return n("throw",t,i,c)})}c(u.arg)}(e,r,n,i)})}return n=n?n.then(i,i):i()}}function I(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,I(t,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var o=w(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,d;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function E(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function N(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function F(t){if(t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}return{next:S}}function S(){return{value:e,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(t,n,e){},function(t,n,e){"use strict";e.r(n);var r={};e.r(r),e.d(r,"en_EN",function(){return f}),e.d(r,"nb_NO",function(){return l}),e.d(r,"vi_VN",function(){return p});var o=e(0),i=e.n(o),c=e(1),u=e.n(c),a=(e(7),e(2)),s=e.n(a),f={LBL_SHOW_HIDDEN_FILES:"Show hidden files",LBL_MINIMALISTIC:"Minimalistic"},l={LBL_SHOW_HIDDEN_FILES:"Vis skjulte filer",LBL_MINIMALISTIC:"Minimalistisk"},p={LBL_SHOW_HIDDEN_FILES:"Hiện các tập tin ẩn",LBL_MINIMALISTIC:"Tối giản"},h=e(3);function v(t,n){for(var e=[],r=[],o=arguments.length;o-- >2;)e.push(arguments[o]);for(;e.length;){var i=e.pop();if(i&&i.pop)for(o=i.length;o--;)e.push(i[o]);else null!=i&&!0!==i&&!1!==i&&r.push(i)}return"function"==typeof t?t(n||{},r):{nodeName:t,attributes:n||{},children:r,key:n&&n.key}}function d(t,n,e,r){var o,i=[].map,c=r&&r.children[0]||null,u=c&&function t(n){return{nodeName:n.nodeName.toLowerCase(),attributes:{},children:i.call(n.childNodes,function(n){return 3===n.nodeType?n.nodeValue:t(n)})}}(c),a=[],s=!0,f=d(t),l=function t(n,e,r){for(var o in r)"function"==typeof r[o]?function(t,o){r[t]=function(t){var i=o(t);return"function"==typeof i&&(i=i(m(n,f),r)),i&&i!==(e=m(n,f))&&!i.then&&v(f=y(n,d(e,i),f)),i}}(o,r[o]):t(n.concat(o),e[o]=d(e[o]),r[o]=d(r[o]));return r}([],f,d(n));return v(),l;function p(t){return"function"==typeof t?p(t(f,l)):null!=t?t:""}function h(){o=!o;var t=p(e);for(r&&!o&&(c=function t(n,e,r,o,i){if(o===r)   ;else if(null==r||r.nodeName!==o.nodeName){var c=function t(n,e){var r="string"==typeof n||"number"==typeof n?document.createTextNode(n):(e=e||"svg"===n.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",n.nodeName):document.createElement(n.nodeName);var o=n.attributes;if(o){o.oncreate&&a.push(function(){o.oncreate(r)});for(var i=0;i<n.children.length;i++)r.appendChild(t(n.children[i]=p(n.children[i]),e));for(var c in o)b(r,c,o[c],null,e)}return r}(o,i);n.insertBefore(c,e),null!=r&&w(n,e,r),e=c}else if(null==r.nodeName)e.nodeValue=o;else{!function(t,n,e,r){for(var o in d(n,e))e[o]!==("value"===o||"checked"===o?t[o]:n[o])&&b(t,o,e[o],n[o],r);var i=s?e.oncreate:e.onupdate;i&&a.push(function(){i(t,n)})}(e,r.attributes,o.attributes,i=i||"svg"===o.nodeName);for(var u={},f={},l=[],h=r.children,v=o.children,y=0;y<h.length;y++){l[y]=e.childNodes[y];var m=g(h[y]);null!=m&&(u[m]=[l[y],h[y]])}for(var y=0,x=0;x<v.length;){var m=g(h[y]),L=g(v[x]=p(v[x]));if(f[m])y++;else if(null==L||L!==g(h[y+1]))if(null==L||s)null==m&&(t(e,l[y],h[y],v[x],i),x++),y++;else{var j=u[L]||[];m===L?(t(e,j[0],j[1],v[x],i),y++):j[0]?t(e,e.insertBefore(j[0],l[y]),j[1],v[x],i):t(e,l[y],null,v[x],i),f[L]=v[x],x++}else null==m&&w(e,l[y],h[y]),y++}for(;y<h.length;)null==g(h[y])&&w(e,l[y],h[y]),y++;for(var y in u)f[y]||w(e,u[y][0],u[y][1])}return e}(r,c,u,u=t)),s=!1;a.length;)a.pop()()}function v(){o||(o=!0,setTimeout(h))}function d(t,n){var e={};for(var r in t)e[r]=t[r];for(var r in n)e[r]=n[r];return e}function y(t,n,e){var r={};return t.length?(r[t[0]]=t.length>1?y(t.slice(1),n,e[t[0]]):n,d(e,r)):n}function m(t,n){for(var e=0;e<t.length;)n=n[t[e++]];return n}function g(t){return t?t.key:null}function x(t){return t.currentTarget.events[t.type](t)}function b(t,n,e,r,o){if("key"===n)   ;else if("style"===n)if("string"==typeof e)t.style.cssText=e;else for(var i in"string"==typeof r&&(r=t.style.cssText=""),d(r,e)){var c=null==e||null==e[i]?"":e[i];"-"===i[0]?t.style.setProperty(i,c):t.style[i]=c}else"o"===n[0]&&"n"===n[1]?(n=n.slice(2),t.events?r||(r=t.events[n]):t.events={},t.events[n]=e,e?r||t.addEventListener(n,x):t.removeEventListener(n,x)):n in t&&"list"!==n&&"type"!==n&&"draggable"!==n&&"spellcheck"!==n&&"translate"!==n&&!o?t[n]=null==e?"":e:null!=e&&!1!==e&&t.setAttribute(n,e),null!=e&&!1!==e||t.removeAttribute(n)}function w(t,n,e){function r(){t.removeChild(function t(n,e){var r=e.attributes;if(r){for(var o=0;o<e.children.length;o++)t(n.childNodes[o],e.children[o]);r.ondestroy&&r.ondestroy(n)}return n}(n,e))}var o=e.attributes&&e.attributes.onremove;o?o(n,r):r()}}var y=function(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}};var m=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)};var g=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var x=function(t){return y(t)||m(t)||g()};function b(t,n){for(var e=[],r=[],o=arguments.length;2<o--;)e.push(arguments[o]);for(;e.length;){var i=e.pop();if(i&&i.pop)for(o=i.length;o--;)e.push(i[o]);else null!=i&&!0!==i&&!1!==i&&r.push(i)}return"function"==typeof t?t(n||{},r):{nodeName:t,attributes:n||{},children:r,key:n&&n.key}}function w(t,n,e,r){function o(t){return"function"==typeof t?o(t(L,j)):null==t?"":t}function i(){y=!y;var t=o(e);for(r&&!y&&(g=function t(n,e,r,i,c){if(i===r)   ;else if(null==r||r.nodeName!==i.nodeName){var u=h(i,c);n.insertBefore(u,e),null!=r&&d(n,e,r),e=u}else if(null==r.nodeName)e.nodeValue=i;else{v(e,r.attributes,i.attributes,c=c||"svg"===i.nodeName);for(var a={},s={},l=[],p=r.children,y=i.children,m=0;m<p.length;m++){l[m]=e.childNodes[m];var g=f(p[m]);null!=g&&(a[g]=[l[m],p[m]])}for(var m=0,x=0;x<y.length;){var g=f(p[m]),b=f(y[x]=o(y[x]));if(s[g])m++;else if(null==b||b!==f(p[m+1]))if(null==b||w)null==g&&(t(e,l[m],p[m],y[x],c),x++),m++;else{var L=a[b]||[];g===b?(t(e,L[0],L[1],y[x],c),m++):L[0]?t(e,e.insertBefore(L[0],l[m]),L[1],y[x],c):t(e,l[m],null,y[x],c),s[b]=y[x],x++}else null==g&&d(e,l[m],p[m]),m++}for(;m<p.length;)null==f(p[m])&&d(e,l[m],p[m]),m++;for(var m in a)s[m]||d(e,a[m][0],a[m][1])}return e}(r,g,x,x=t)),w=!1;b.length;)b.pop()()}function c(){y||(y=!0,setTimeout(i))}function u(t,n){var e={};for(var r in t)e[r]=t[r];for(var r in n)e[r]=n[r];return e}function a(t,n,e){var r={};return t.length?(r[t[0]]=1<t.length?a(t.slice(1),n,e[t[0]]):n,u(e,r)):n}function s(t,n){for(var e=0;e<t.length;)n=n[t[e++]];return n}function f(t){return t?t.key:null}function l(t){return t.currentTarget.events[t.type](t)}function p(t,n,e,r,o){if("key"===n)   ;else if("style"!==n)"o"===n[0]&&"n"===n[1]?(n=n.slice(2),t.events?!r&&(r=t.events[n]):t.events={},t.events[n]=e,e?!r&&t.addEventListener(n,l):t.removeEventListener(n,l)):n in t&&"list"!==n&&"type"!==n&&"draggable"!==n&&"spellcheck"!==n&&"translate"!==n&&!o?t[n]=null==e?"":e:null!=e&&!1!==e&&t.setAttribute(n,e),(null==e||!1===e)&&t.removeAttribute(n);else if("string"==typeof e)t.style.cssText=e;else for(var i in"string"==typeof r&&(r=t.style.cssText=""),u(r,e)){var c=null==e||null==e[i]?"":e[i];"-"===i[0]?t.style.setProperty(i,c):t.style[i]=c}}function h(t,n){var e="string"==typeof t||"number"==typeof t?document.createTextNode(t):(n=n||"svg"===t.nodeName)?document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):document.createElement(t.nodeName),r=t.attributes;if(r){r.oncreate&&b.push(function(){r.oncreate(e)});for(var i=0;i<t.children.length;i++)e.appendChild(h(t.children[i]=o(t.children[i]),n));for(var c in r)p(e,c,r[c],null,n)}return e}function v(t,n,e,r){for(var o in u(n,e))e[o]!==("value"==o||"checked"==o?t[o]:n[o])&&p(t,o,e[o],n[o],r);var i=w?e.oncreate:e.onupdate;i&&b.push(function(){i(t,n)})}function d(t,n,e){function r(){t.removeChild(function t(n,e){var r=e.attributes;if(r){for(var o=0;o<e.children.length;o++)t(n.childNodes[o],e.children[o]);r.ondestroy&&r.ondestroy(n)}return n}(n,e))}var o=e.attributes&&e.attributes.onremove;o?o(n,r):r()}var y,m=[].map,g=r&&r.children[0]||null,x=g&&function t(n){return{nodeName:n.nodeName.toLowerCase(),attributes:{},children:m.call(n.childNodes,function(n){return 3===n.nodeType?n.nodeValue:t(n)})}}(g),b=[],w=!0,L=u(t),j=function t(n,e,r){for(var o in r)"function"==typeof r[o]?function(t,o){r[t]=function(t){var i=o(t);return"function"==typeof i&&(i=i(s(n,L),r)),i&&i!==(e=s(n,L))&&!i.then&&c(L=a(n,u(e,i),L)),i}}(o,r[o]):t(n.concat(o),e[o]=u(e[o]),r[o]=u(r[o]));return r}([],L,u(n));return c(),j}var L=function(t,n){return"number"==typeof t?"".concat(t,"px"):!1===t?n:t},j={grow:function(t){return{flexGrow:t}},shrink:function(t){return{flexShrink:t}},basis:function(t){return{flexBasis:L(t,"auto")}},align:function(t){return{alignItems:t}},justify:function(t){return{justifyContent:t}},padding:function(t){return{margin:L(t,"0")}},margin:function(t){return{margin:L(t,"0")}}},k=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],e=t.class instanceof Array?t.class:[t.class],r=["osjs-gui"].concat(x(e));t.orientation&&r.push("osjs-gui-"+t.orientation);var o="string"==typeof t.style?{}:Object.assign({},t.style||{}),i=Object.keys(t).reduce(function(n,e){var r=j[e]?j[e](t[e]):void 0;return Object.assign({},n,r)},o);return b("div",{oncreate:t.oncreate,ondestroy:t.ondestroy,class:r.filter(function(t){return!!t}).join(" "),style:i},n)},_=function(t,n){return b(k,Object.assign({orientation:"horizontal"},t,{class:["osjs-gui-box",t.class]}),n)};function O(t,n){return t(n={exports:{}},n.exports),n.exports}var I=O(function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(r){return t.exports=e="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},e(r)}t.exports=e}),E=function(t){var n=t&&"object"===I(t)?t.src:t;return b("i",{"data-icon":t&&"object"===I(t)?t.name:void 0,class:"osjs-icon",style:{backgroundImage:"string"==typeof t?"url(".concat(n,")"):void 0}})};var N=function(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t},T=function(t,n){return Object.keys(t).filter(function(t){return-1===n.indexOf(t)}).reduce(function(n,e){return Object.assign(N({},e,t[e]),n)},{})},F=function(){var t,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:250,e=!1;return function(r,o){return t=clearTimeout(t),t=setTimeout(function(){return e=!1},n),e?(r.preventDefault(),o(r)):(e=!0,!1)}},S=function(t,n,e,r,o){var i=n.oninput||function(){},c=n.onchange||function(){},u=n.onkeydown||function(){},a=o||function(t){return[t.target.value]},s=Object.assign({oninput:function(t){return i.apply(void 0,[t].concat(x(a(t))))},onchange:function(t){return c.apply(void 0,[t].concat(x(a(t))))},onkeydown:function(t){13===t.keyCode&&n.onenter&&n.onenter.apply(n,[t].concat(x(a(t)))),u(t)}},e,T(n,["choices","label","box","oninput","onchange"]));return b(k,Object.assign({},n.box||{},{class:"osjs-gui-field osjs-gui-"+t}),r(s))},D=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return S("button",t,{},function(e){var r=[];return t.icon&&r.push(b(E,t.icon)),"string"==typeof t.label&&r.push(b("span",{class:"osjs-label"},t.label)),b("button",e,r.concat(x(n)))})},B=function(t){return b("div",{id:"osjs-context-menu",className:"osjs-gui osjs-gui-menu",oncreate:t.oncreate,onupdate:t.onupdate,style:{display:!1===t.visible?"none":"block",top:t.position?t.position.top+"px":0,left:t.position?t.position.left+"px":0}},function t(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,o=function(t){var n=[];return"checkbox"===t.type||"boolean"==typeof t.checked?n.push(b("span",{class:"osjs-gui-menu-checkbox "+(t.checked?"active":"")})):t.icon&&n.push(b(E,t.icon)),n.push(b("span",{},t.label)),n},i=function(n,e){if("function"==typeof e.element)return e.element();var i=[b("span",{class:"separator"===e.type?"osjs-gui-menu-separator":"osjs-gui-menu-label "+(e.disabled?"osjs__disabled":"")},o(e))];return e.items&&i.push(t(n,e.items,r+1)),i};return b("ul",{class:""},e.map(function(t){return b("li",{class:"osjs-gui-menu-entry"},[b("div",{class:"osjs-gui-menu-container","data-has-image":!!t.icon||void 0,"data-has-children":!!t.items||void 0,onmouseover:t.items?n.onshow:void 0,ontouchend:t.items?n.onshow:void 0,onclick:function(e){t.items||(t.onclick&&t.onclick(t,e),n.onclick&&n.onclick(t,e,t))}},i(n,t))])}))}(t,t.menu))},M=function(t,n){return b(k,Object.assign({orientation:"vertical"},t,{class:["osjs-gui-toolbar",t.class]}),n)},H=function(t,n){return b(k,Object.assign({},t.box||{},{class:["osjs-gui-statusbar",t.class]}),n)},P=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],e=t.onclick,r=t.data;return b("div",{onclick:function(t){if("function"==typeof e){var n=t.target.parentNode,o=Array.prototype.indexOf.call(n.children,t.target);e(t,r||{},o)}}},b("span",{},n))},A=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return b(k,Object.assign({},t,{class:["osjs-gui-menubar",t.class]}),x((t.items||[]).map(function(n){return b(P,{data:n.data,onclick:n.onclick||t.onclick},n.label)})).concat(x(n)))};function R(t,n,e,r){return n._$r=function(){return{}},function(o,i){return b(r||"x-",{key:o.key,id:o.id,class:o.class,oncreate:function(r){var c=w(t,n,function(t,n){var o=e(t,n);return"function"==typeof o&&(o=o(r._$p,r._$c)),o},r);r._$p=o,r._$c=i,r._$r=c._$r,r._$u=c.uninit,c.init&&c.init(o),o.oncreate&&o.oncreate(r)},onupdate:function(t){t._$p=o,t._$c=i,t._$r(),o.onupdate&&o.onupdate(t)},ondestroy:function(t){t._$u&&t._$u()}})}}var z=function(t,n,e,r){var o=Array(Math.ceil(e.length/2)).fill(null).map(function(){return b("div",{class:"osjs-gui-panes-spacer",onmousedown:function(t){return function(t,n,e){var r=t.target,o=t.clientX,i=t.clientY,c=r.previousSibling,u=c.offsetWidth,a=c.offsetHeight,s=Array.from(r.parentNode.children).indexOf(c),f=.8*c.parentNode.offsetWidth,l=.8*c.parentNode.offsetHeight;if(!(0>s)){var p=function(t){var r=Math.min;t.preventDefault();var c="vertical"===e?u:a;if("vertical"===e){var p=t.clientX-o;c=r(f,c+p)}else{var h=t.clientY-i;c=r(l,c+h)}n.setSize({index:s,size:c})};t.preventDefault(),document.addEventListener("mousemove",p),document.addEventListener("mouseup",function t(n){n.preventDefault(),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",t)})}}(t,n,r)}})});return e.map(function(n,e){var r=t.sizes[e]?t.sizes[e]+"px":void 0;return b("div",{class:"osjs-gui-panes-pane",style:{flex:r?"0 0 ".concat(r):r}},n)}).map(function(t,n){return[t,o[n]]}).reduce(function(t,n){return t.concat(n)}).filter(function(t){return void 0!==t})},$=R({sizes:[]},{init:function(t){return{sizes:t.sizes||[150]}},setSize:function(t){var n=t.index,e=t.size;return function(t){var r=[].concat(t.sizes);return r[n]=e,{sizes:r}}}},function(t,n){return function(e,r){var o=e.orientation||"vertical";return b(k,{orientation:o,class:"osjs-gui-panes-inner"},z(t,n,r,o))}},"div"),W=function(t,n){return b($,{class:"osjs-gui-panes"},n)},G=F(),C=function(t){return b(k,Object.assign({class:"osjs-gui-list-view"},t.box||{}),function(t){var n=function(n){return function(e,r){var o=e.columns[n]||{},i=t.selectedIndex===r,c=o.icon?b(E,o.icon):null,u=[b("span",{},["object"===I(o)?o.label:o])];return c&&u.unshift(c),b("div",{"data-has-icon":!!o.icon||void 0,class:"osjs-gui-list-view-cell"+(i?" osjs__active":""),ontouchstart:function(n){return G(n,function(){return t.onactivate({data:e.data,index:r,ev:n})})},ondblclick:function(n){return t.onactivate({data:e.data,index:r,ev:n})},onclick:function(n){return t.onselect({data:e.data,index:r,ev:n})},oncontextmenu:function(n){return t.oncontextmenu({data:e.data,index:r,ev:n})},oncreate:function(n){return t.oncreate({data:e.data,index:r,el:n})}},u)}},e=function(e,r){return b("div",{class:"osjs-gui-list-view-pane",style:r.style||{}},[b("div",{class:"osjs-gui-list-view-header",style:{display:t.hideColumns?"none":void 0}},b("span",{},"object"===I(r)?r.label:r)),b("div",{class:"rows","data-zebra":t.zebra+""},t.rows.map(n(e)))])};return b("div",{class:"osjs-gui-list-view-wrapper",oncreate:function(n){return n.scrollTop=t.scrollTop},onupdate:function(n){0>t.selectedIndex&&(n.scrollTop=t.scrollTop)}},t.columns.map(function(t,n){return e(n,t)}))}(T(t,["box"])))},Y=function(t,n){var e=Object.assign({zebra:!0,columns:[],rows:[],onselect:function(t){var e=t.data,r=t.index,o=t.ev;n.select({data:e,index:r,ev:o}),n.setSelectedIndex(r)},onactivate:function(t){var e=t.data,r=t.index,o=t.ev;n.activate({data:e,index:r,ev:o}),n.setSelectedIndex(-1)},oncontextmenu:function(t){var e=t.data,r=t.index,o=t.ev;n.select({data:e,index:r,ev:o}),n.contextmenu({data:e,index:r,ev:o}),n.setSelectedIndex(r)},oncreate:function(t){n.created(t)}},t);return function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return C(Object.assign(e,t))}},X=function(t){return Object.assign({selectedIndex:-1,scrollTop:0},t)},U=function(t){return Object.assign({select:function(){return function(){return{}}},activate:function(){return function(){return{}}},contextmenu:function(){return function(){return{}}},created:function(){return function(){return{}}},setRows:function(t){return{rows:t}},setColumns:function(t){return{columns:t}},setScrollTop:function(t){return function(){return{scrollTop:t}}},setSelectedIndex:function(t){return function(){return{selectedIndex:t}}}},t||{})},q=(F(),function(t,n,e){var r=t.labels,o=t.onchange,i=t.oncontextmenu;return(r||[]).map(function(t,r){return b("div",{class:n.selectedIndex===r?"osjs__active":"",oncontextmenu:function(n){(i||function(){})(n,r,t)},onclick:function(n){e.setSelectedIndex(r),(o||function(){})(n,r,t)}},b("span",{},t))})}),Q=function(t,n){return n.map(function(n,e){return b("div",{class:t.selectedIndex===e?"osjs__active":""},n)})},V=(R({selectedIndex:0},{init:function(t){return{selectedIndex:t.selectedIndex||0}},setSelectedIndex:function(t){return function(){return{selectedIndex:t}}}},function(t,n){return function(e,r){return b("div",{class:"osjs-gui-tabs-wrapper"},[b("div",{class:"osjs-gui-tabs-header"},q(e,t,n)),b("div",{class:"osjs-gui-tabs-panes"},Q(t,r))])}},"div"),function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return S("text-field",t,{autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false",type:"text"},function(t){return b("input",t)})}),J=(R({active:!0},{init:function(t){return{ative:!1!==t.active}},ontoggle:function(t){var n=t.ev,e=t.active;return(t.ontoggle||function(){})(n,e),{active:e}}},function(t,n){return function(e,r){return b(k,Object.assign({},e.box||{},{class:["osjs-gui-expander-wrapper"]}),[b("div",{class:"osjs-gui-expander-header",onclick:function(r){return n.ontoggle({ev:r,active:!t.active,ontoggle:e.ontoggle})}},[b("div",{class:"osjs-gui-expander-header-icon","data-active":t.active+""}),b("div",{class:"osjs-gui-expander-header-label"},e.label)]),b("div",{class:"osjs-gui-expander-content",style:{display:!1===t.active?"none":void 0}},r)])}},"div"),O(function(t){!function(n){function e(t,n,e,r){var i=n&&n.prototype instanceof o?n:o,c=Object.create(i.prototype),u=new h(r||[]);return c._invoke=s(t,e,u),c}function r(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}function o(){}function i(){}function c(){}function u(t){["next","throw","return"].forEach(function(n){t[n]=function(t){return this._invoke(n,t)}})}function a(t){function n(e,o,i,c){var u=r(t[e],t,o);if("throw"!==u.type){var a=u.arg,s=a.value;return s&&"object"==typeof s&&m.call(s,"__await")?Promise.resolve(s.__await).then(function(t){n("next",t,i,c)},function(t){n("throw",t,i,c)}):Promise.resolve(s).then(function(t){a.value=t,i(a)},function(t){return n("throw",t,i,c)})}c(u.arg)}var e;this._invoke=function(t,r){function o(){return new Promise(function(e,o){n(t,r,e,o)})}return e=e?e.then(o,o):o()}}function s(t,n,e){var o="suspendedStart";return function(i,c){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw c;return{value:void 0,done:!0}}for(e.method=i,e.arg=c;;){var u=e.delegate;if(u){var a=f(u,e);if(a){if(a===j)continue;return a}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===o)throw o="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);o="executing";var s=r(t,n,e);if("normal"===s.type){if(o=e.done?"completed":"suspendedYield",s.arg===j)continue;return{value:s.arg,done:e.done}}"throw"===s.type&&(o="completed",e.method="throw",e.arg=s.arg)}}}function f(t,n){var e=t.iterator[n.method];if(void 0===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=void 0,f(t,n),"throw"===n.method))return j;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return j}var o=r(e,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,j;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,j):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,j)}function l(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function p(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function h(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(l,this),this.reset(!0)}function v(t){if(t){var n=t[x];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,r=function n(){for(;++e<t.length;)if(m.call(t,e))return n.value=t[e],n.done=!1,n;return n.value=void 0,n.done=!0,n};return r.next=r}}return{next:d}}function d(){return{value:void 0,done:!0}}var y=Object.prototype,m=y.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},x=g.iterator||"@@iterator",b=g.asyncIterator||"@@asyncIterator",w=g.toStringTag||"@@toStringTag",L=n.regeneratorRuntime;if(L)t.exports=L;else{(L=n.regeneratorRuntime=t.exports).wrap=e;var j={},k={};k[x]=function(){return this};var _=Object.getPrototypeOf,O=_&&_(_(v([])));O&&O!==y&&m.call(O,x)&&(k=O);var I=c.prototype=o.prototype=Object.create(k);i.prototype=I.constructor=c,c.constructor=i,c[w]=i.displayName="GeneratorFunction",L.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===i||"GeneratorFunction"===(n.displayName||n.name))},L.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,!(w in t)&&(t[w]="GeneratorFunction")),t.prototype=Object.create(I),t},L.awrap=function(t){return{__await:t}},u(a.prototype),a.prototype[b]=function(){return this},L.AsyncIterator=a,L.async=function(t,n,r,o){var i=new a(e(t,n,r,o));return L.isGeneratorFunction(n)?i:i.next().then(function(t){return t.done?t.value:i.next()})},u(I),I[w]="Generator",I[x]=function(){return this},I.toString=function(){return"[object Generator]"},L.keys=function(t){var n=[];for(var e in t)n.push(e);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},L.values=v,h.prototype={constructor:h,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(p),!t)for(var n in this)"t"===n.charAt(0)&&m.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function n(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}if(this.done)throw t;for(var e=this,r=this.tryEntries.length-1;0<=r;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=m.call(o,"catchLoc"),u=m.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,n){for(var e,r=this.tryEntries.length-1;0<=r;--r)if((e=this.tryEntries[r]).tryLoc<=this.prev&&m.call(e,"finallyLoc")&&this.prev<e.finallyLoc){var o=e;break}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=n,o?(this.method="next",this.next=o.finallyLoc,j):this.complete(i)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),j},finish:function(t){for(var n,e=this.tryEntries.length-1;0<=e;--e)if((n=this.tryEntries[e]).finallyLoc===t)return this.complete(n.completion,n.afterLoc),p(n),j},catch:function(t){for(var n,e=this.tryEntries.length-1;0<=e;--e)if((n=this.tryEntries[e]).tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;p(n)}return o}throw new Error("illegal catch attempt")},delegateYield:function(t,n,e){return this.delegate={iterator:v(t),resultName:n,nextLoc:e},"next"===this.method&&(this.arg=void 0),j}}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())})),Z=function(){return this||"object"==typeof self&&self}()||Function("return this")(),K=Z.regeneratorRuntime&&0<=Object.getOwnPropertyNames(Z).indexOf("regeneratorRuntime"),tt=K&&Z.regeneratorRuntime;Z.regeneratorRuntime=void 0;var nt=J;if(K)Z.regeneratorRuntime=tt;else try{delete Z.regeneratorRuntime}catch(t){Z.regeneratorRuntime=void 0}var et=nt;function rt(t,n,e,r,o,i,c){try{var u=t[i](c),a=u.value}catch(t){return void e(t)}u.done?n(a):Promise.resolve(a).then(r,o)}var ot=function(t){return function(){var n=this,e=arguments;return new Promise(function(r,o){function i(t){rt(u,r,o,i,c,"next",t)}function c(t){rt(u,r,o,i,c,"throw",t)}var u=t.apply(n,e);i(void 0)})}};var it=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")};function ct(t,n){for(var e,r=0;r<n.length;r++)(e=n[r]).enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}var ut=function(t,n,e){return n&&ct(t.prototype,n),e&&ct(t,e),t},at=function(t){return t(),setTimeout(t,100)},st=function(){function t(n){it(this,t),this.core=n,this.callback=function(){},this.actions=null}return ut(t,[{key:"destroy",value:function(){this.callback=null,this.actions=null}},{key:"init",value:function(){var t,n=this;this.actions=w({visible:!1,menu:[],position:{top:0,left:0}},{clamp:function(e){return function(r){if(e=e||document.querySelector("#osjs-context-menu"),clearTimeout(t),e){var o=function(t,n,e){var r={},o=e.top+n.offsetHeight,i=e.left+n.offsetWidth,c=t.offsetHeight-e.top,u=t.offsetWidth-e.left,a=i>t.offsetWidth,s=o>t.offsetHeight;return s&&(r.top=t.offsetHeight-n.offsetHeight-c),a&&(r.left=t.offsetWidth-n.offsetWidth-u),s||a?r:null}(n.core.$root,e,r.position);if(o)return{position:o}}return{}}},onshow:function(e){return function(){t=at(function(){return function(t,n){var e=n.target.querySelector("ul");e&&(e.classList.contains("osjs-gui-menu-container")&&(e=e.parentNode.parentNode),e&&e.offsetParent)&&(e.classList.remove("clamp-right"),e.getBoundingClientRect().right>t.offsetWidth&&e.classList.add("clamp-right"))}(n.core.$root,e)})}},show:function(t){return function(e,r){var o=t.menu,i=t.position;if(i instanceof Event)i={left:i.clientX,top:i.clientY};else if(i instanceof Element){var c=i.getBoundingClientRect();i={left:c.left,top:c.top+c.height}}return n.callback=function(e,r,o){t.callback&&t.callback(e,r),!1!==o.closeable&&n.actions.hide()},at(function(){return r.clamp()}),{visible:!0,menu:o||[],position:i||{top:0,left:0}}}},hide:function(){return function(){return n.callback=null,{visible:!1}}}},function(t){return function(n,e){return b(B,{position:n.position,visible:n.visible,menu:n.menu,onclick:t,onshow:e.onshow})}}(function(){!n.core.destroyed&&n.callback&&n.callback.apply(n,arguments)}),this.core.$root)}},{key:"show",value:function(){var t;return this.actions?(t=this.actions).show.apply(t,arguments):null}},{key:"hide",value:function(){var t;return this.actions?(t=this.actions).hide.apply(t,arguments):null}}]),t}(),ft=function(t){var n=t.target,e="TEXTAREA"===n.tagName;return e||"INPUT"!==n.tagName||(e=-1!==["text","password","number","email"].indexOf(n.type)),e},lt=(function(){function t(n){it(this,t),this.core=n,this.contextmenu=new st(n)}ut(t,[{key:"destroy",value:function(){var t=document.getElementById("osjs-context-menu");t&&t.remove(),this.contextmenu.destroy()}},{key:"init",value:function(){var t=ot(et.mark(function t(){var n,e=this;return et.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n={show:function(){var t;return(t=e.contextmenu).show.apply(t,arguments)},hide:function(){var t;return(t=e.contextmenu).hide.apply(t,arguments)}},this.core.instance("osjs/contextmenu",function(){return arguments.length?n.show.apply(n,arguments):n}),this.core.$root.addEventListener("contextmenu",function(t){ft(t)||(t.stopPropagation(),t.preventDefault())});case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"start",value:function(){var t=this;this.core.$root.addEventListener("click",function(n){!document.getElementById("osjs-context-menu").contains(n.target)&&t.contextmenu&&t.contextmenu.hide()},!0),this.contextmenu.init()}}])}(),function(t,n){var e=n.filter(function(t){return t.isDirectory}).length,r=n.filter(function(t){return!t.isDirectory}).length,o=n.reduce(function(t,n){return t+(n.size||0)},0);return"".concat(e," directories, ").concat(r," files, ").concat(o," bytes total")}),pt=function(t){return t.make("osjs/fs").mountpoints(!0).map(function(t){return{columns:[{icon:t.icon,label:t.label}],data:t}})},ht=function(t,n){return t.make("osjs/fs").mountpoints(!0).map(function(t){return{label:t.label,icon:t.icon,onclick:function(){return n(t.root)}}})},vt=function(t,n,e,o){var c={path:"home:/"},a=n.args.path?Object.assign({},c,n.args.path):c,s={showHiddenFiles:!0},f=t.make("osjs/locale").translatableFlat(n.metadata.title),l=t.make("osjs/event-handler","FileManager"),p=function(t,n,e,r){return function(t,e,o){o=o||function(){};var i=function(t){return function(n,e){r.setState("loading",!1),"ok"!==n&&"yes"!==n||t(e)}};if("mkdir"===t)n.make("osjs/dialog","prompt",{message:"Create new directory",value:"New directory"},i(function(t){if(t){var r=e.path.replace(/\/?$/,"/")+t;n.make("osjs/vfs").mkdir({path:r}).then(function(){return o()})}}));else if("rename"===t)n.make("osjs/dialog","prompt",{message:"Rename ".concat(e.filename),value:e.filename},i(function(t){if(t){var r=function(t,n){var e=t.path.lastIndexOf(t.filename);return t.path.substr(0,e)+n}(e,t);n.make("osjs/vfs").rename(e,{path:r}).then(function(){return o()})}}));else if("delete"===t)n.make("osjs/dialog","confirm",{message:"Delete ".concat(e.filename)},function(){n.make("osjs/vfs").unlink(e).then(function(){return o()})});else if("error"===t)return void n.make("osjs/dialog","alert",{type:"error",error:e.error,message:e.message},i(function(){}));r.setState("loading",!0)}}(0,t,0,e),h=d(function(t,n,e,r){return{path:"",status:"",history:[],historyIndex:-1,minimalistic:!1,mountview:X({class:"osjs-gui-fill",columns:["Name"],hideColumns:!0,rows:pt(n)}),fileview:X({columns:[{label:"Name",style:{minWidth:"20em"}},{label:"Type",style:{maxWidth:"150px"}},{label:"Size",style:{flex:"0 0 7em",textAlign:"right"}}]})}}(0,t),function(t,n,e,r){return{addHistory:function(t){return function(n){var e=-1===n.historyIndex?[]:n.history,r=e[e.length-1]===t?e.length-1:e.push(t)-1;return{history:e,historyIndex:r}}},clearHistory:function(){return function(t){return{historyIndex:-1,history:[]}}},setMinimalistic:function(t){return{minimalistic:t}},setHistory:function(t){return function(n){return{history:t}}},setPath:function(t){return function(n){return{path:t}}},setStatus:function(t){return function(n){return{status:t}}},setFileList:function(t){var n=t.path,e=t.rows;return function(t,r){return r.fileview.setRows(e),{path:n}}},mountview:U({select:function(n){var e=n.data;return t.emit("selectMountpoint",e)}}),fileview:U({select:function(n){var e=n.data;return t.emit("selectFile",e)},activate:function(n){var e=n.data;return t.emit("readFile",e)},created:function(t){var e=t.el,r=t.data;r.isFile&&n.make("osjs/dnd").draggable(e,{data:r})},contextmenu:function(n){var e=n.data,r=n.index,o=n.ev;return t.emit("openContextMenu",e,r,o)}}),back:function(){return function(n){var e=Math.max(0,n.historyIndex-1);return t.emit("openDirectory",n.history[e],!0),{historyIndex:e}}},forward:function(){return function(n){var e=Math.min(n.history.length-1,n.historyIndex+1);return t.emit("openDirectory",n.history[e],!0),{historyIndex:e}}}}}(l,t),function(t,n,e,r){return function(e,r){var o=Y(e.fileview,r.fileview),i=Y(e.mountview,r.mountview),c=n.make("osjs/theme").icon,u=n.make("osjs/locale").translate;return v(_,{class:e.minimalistic?"osjs-filemanager-minimalistic":""},[v(A,{},[v(P,{onclick:function(n){return t.emit("openMenu",n,e,r,{name:"file"})}},u("LBL_FILE")),v(P,{onclick:function(n){return t.emit("openMenu",n,e,r,{name:"view"})}},u("LBL_VIEW")),v(P,{onclick:function(n){return t.emit("openMenu",n,e,r,{name:"go"})}},u("LBL_GO"))]),v(M,{},[v(D,{title:u("LBL_BACK"),icon:c("go-previous"),disabled:!e.history.length||e.historyIndex<=0,onclick:function(){return r.back()}}),v(D,{title:u("LBL_FORWARD"),icon:c("go-next"),disabled:!e.history.length||e.historyIndex===e.history.length-1,onclick:function(){return r.forward()}}),v(D,{title:u("LBL_HOME"),icon:c("go-home"),onclick:function(){return t.emit("goHome")}}),v(V,{value:e.path,box:{grow:1,shrink:1},onenter:function(n,e){return t.emit("openDirectory",{path:e},"clear")}})]),v(W,{style:{flex:"1 1"}},[v(i),v(o)]),v(H,{},[v("span",{},e.status)])])}}(l,t),o),y=function(t){return l.emit("openDirectory",a,null,t)},m=function(n){var e=a.path.replace(/\/?$/,"/")+n.name;return t.make("osjs/vfs").writefile({path:e},n)};l.on("selectFile",function(t){return h.setStatus(function(t){return"".concat(t.filename," (").concat(t.size," bytes)")}(t))}),l.on("selectMountpoint",function(t){return l.emit("openDirectory",{path:t.root})}),l.on("readFile",function(n){n.isDirectory?l.emit("openDirectory",n):t.open(n)}),l.on("openDirectory",function(){var r=u()(i.a.mark(function r(o,c,u){var l,v,d,y,m;return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return l=o.path,e.setState("loading",!0),v="Loading ".concat(l),h.setStatus(v),e.setTitle("".concat(f," - ").concat(v)),r.prev=5,r.next=8,t.make("osjs/vfs").readdir(o,{showHiddenFiles:s.showHiddenFiles});case 8:d=r.sent,r.next=17;break;case 11:return r.prev=11,r.t0=r.catch(5),console.warn(r.t0),h.setPath("string"==typeof a?a:a.path),p("error",{error:r.t0,message:"Failed to open directory"}),r.abrupt("return");case 17:return r.prev=17,e.setState("loading",!1),r.finish(17);case 20:y=d.map(function(n){return{columns:[{label:n.filename,icon:(e=n,e.icon||t.make("osjs/fs").icon(e))},n.mime,n.humanSize],data:n};var e}),void 0===c||!1===c?h.addHistory(o):"clear"===c&&h.clearHistory(),h.setFileList({path:l,rows:y}),h.setStatus(lt(0,d)),u&&-1!==(m=d.findIndex(function(t){return t.filename===u}))&&h.fileview.setSelectedIndex(m),e.setTitle("".concat(f," - ").concat(l)),a=o,n.args.path=o;case 28:case"end":return r.stop()}},r,this,[[5,11,17,20]])}));return function(t,n,e){return r.apply(this,arguments)}}()),l.on("openMenu",function(e,o,i,c){var u=t.make("osjs/locale").translate,f=t.make("osjs/locale").translatable(r),h={file:[{label:u("LBL_UPLOAD"),onclick:function(){var t=document.createElement("input");t.type="file",t.onchange=function(n){t.files.length&&m(t.files[0]).then(function(){return y(t.files[0].name)}).catch(function(t){return p("error",{error:t,message:"Failed to upload file(s)"})})},t.click()}},{label:u("LBL_MKDIR"),onclick:function(){return p("mkdir",{path:a.path},function(){return y()})}},{label:u("LBL_QUIT"),onclick:function(){return n.destroy()}}],view:[{label:u("LBL_REFRESH"),onclick:function(){return y()}},{label:f("LBL_MINIMALISTIC"),checked:o.minimalistic,onclick:function(){i.setMinimalistic(!o.minimalistic)}},{label:f("LBL_SHOW_HIDDEN_FILES"),checked:s.showHiddenFiles,onclick:function(){s.showHiddenFiles=!s.showHiddenFiles,y()}}],go:ht(t,function(t){return l.emit("openDirectory",{path:t})})};t.make("osjs/contextmenu").show({menu:h[c.name]||[],position:e.target})}),l.on("openContextMenu",function(n,e,r){if(-1===["..","."].indexOf(n.filename)){var o=t.make("osjs/locale").translate,i=[n.isDirectory?{label:o("LBL_GO"),onclick:function(){return l.emit("readFile",n)}}:{label:o("LBL_OPEN"),onclick:function(){return l.emit("readFile",n)}},{label:o("LBL_RENAME"),onclick:function(){return p("rename",n,function(){return y()})}},{label:o("LBL_DELETE"),onclick:function(){return p("delete",n,function(){return y()})}}];n.isDirectory||i.push({label:o("LBL_DOWNLOAD"),onclick:function(){return t.make("osjs/vfs").download(n)}}),t.make("osjs/contextmenu").show({position:r,menu:i})}}),e.on("drop",function(t,n,e,r){r.length&&Promise.all(r.map(m)).then(function(){return y(r[0].name)}).catch(function(t){return p("error",{error:t,message:"Failed to upload file(s)"})})}),l.on("goHome",function(){return l.emit("openDirectory",c,"clear")}),l.emit("openDirectory",a)};
/*!
 * OS.js - JavaScript Cloud/Web Desktop Platform
 *
 * Copyright (c) 2011-2019, Anders Evenrud <andersevenrud@gmail.com>
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * @author  Anders Evenrud <andersevenrud@gmail.com>
 * @licence Simplified BSD License
 */s.a.register(h.a,function(t,n,e,r){var o=t.make("osjs/application",{args:n,options:e,metadata:r}),i=t.make("osjs/locale").translatableFlat(r.title);return o.createWindow({id:"FileManager",title:i,icon:o.resource(r.icon),dimension:{width:400,height:400},attributes:{mediaQueries:{small:"screen and (max-width: 400px)"}}}).on("destroy",function(){return o.destroy()}).on("render",function(t){return t.focus()}).render(function(n,e){return vt(t,o,e,n)}),o})}]);
//# sourceMappingURL=main.js.map